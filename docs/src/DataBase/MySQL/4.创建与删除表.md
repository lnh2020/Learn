# MySQL 表的创建与删除操作

表（Table）是 MySQL 中存储数据的基本单位，由行（记录）和列（字段）组成。以下是创建和删除表的详细操作指南：


## 1. 创建表（CREATE TABLE）

### 基本语法
```sql
CREATE TABLE [IF NOT EXISTS] 表名 (
  字段1 数据类型 [约束条件],
  字段2 数据类型 [约束条件],
  ...
  [表级约束条件]
) [表选项];
```

- **`IF NOT EXISTS`**：可选，避免创建已存在的表时报错。
- **字段定义**：包含字段名、数据类型（如 `INT`、`VARCHAR`）和约束（如 `NOT NULL`、`PRIMARY KEY`）。
- **表选项**：可选，如字符集（`CHARACTER SET`）、存储引擎（`ENGINE`）等。


### 常用约束条件
| 约束         | 说明                                  |
|--------------|---------------------------------------|
| `NOT NULL`   | 字段值不能为 `NULL`（必须填写）       |
| `PRIMARY KEY` | 主键，唯一标识一条记录（值唯一且非空） |
| `UNIQUE`     | 字段值唯一（允许 `NULL`，但只能有一个） |
| `DEFAULT`    | 字段默认值（如 `DEFAULT 0`）          |
| `AUTO_INCREMENT` | 自增（仅整数类型，常用于主键）        |
| `FOREIGN KEY` | 外键，关联其他表的主键（保证数据一致性） |


### 示例
#### 示例 1：创建基础表（用户表）
```sql
-- 切换到目标数据库
USE mydb;

-- 创建用户表
CREATE TABLE IF NOT EXISTS users (
  id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键，自增ID
  username VARCHAR(50) NOT NULL UNIQUE,  -- 用户名（非空且唯一）
  age TINYINT UNSIGNED,  -- 年龄（无符号整数）
  gender ENUM('male', 'female', 'other'),  -- 性别（枚举值）
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP  -- 创建时间（默认当前时间）
) ENGINE=InnoDB CHARACTER SET utf8mb4;  -- 存储引擎为InnoDB，字符集utf8mb4
```

#### 示例 2：创建带外键的表（订单表，关联用户表）
```sql
CREATE TABLE IF NOT EXISTS orders (
  order_id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  total_price DECIMAL(10,2) NOT NULL,
  order_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  -- 外键约束：关联users表的id字段
  FOREIGN KEY (user_id) REFERENCES users(id)
    ON DELETE CASCADE  -- 当用户被删除时，关联的订单也删除
    ON UPDATE CASCADE  -- 当用户id更新时，订单的user_id同步更新
) ENGINE=InnoDB;
```


## 2. 查看表信息

创建表后，可通过以下命令验证：
```sql
-- 查看当前数据库所有表
SHOW TABLES;

-- 查看表结构（字段、类型、约束等）
DESCRIBE users;  -- 或简写为 DESC users;

-- 查看表的创建语句（含详细配置）
SHOW CREATE TABLE users;
```


## 3. 删除表（DROP TABLE）

### 基本语法
```sql
DROP TABLE [IF EXISTS] 表名1, [表名2, ...];
```

- **`IF EXISTS`**：可选，避免删除不存在的表时报错。
- **注意**：删除表会同时删除表中所有数据和结构，操作不可逆！若需保留表结构仅删除数据，用 `TRUNCATE TABLE 表名;`。


### 示例
```sql
-- 删除单个表（谨慎操作！）
DROP TABLE IF EXISTS orders;

-- 同时删除多个表
DROP TABLE IF EXISTS users, products;
```


## 4. 扩展：临时表（仅会话有效）

临时表用于存储临时数据，会话结束后自动删除：
```sql
-- 创建临时表
CREATE TEMPORARY TABLE temp_data (
  id INT,
  value VARCHAR(100)
);

-- 插入数据
INSERT INTO temp_data VALUES (1, '临时数据');

-- 会话结束后，临时表自动消失，无需手动删除
```


## 注意事项
1. **存储引擎选择**：默认 `InnoDB`（支持事务、外键），适合大多数场景；`MyISAM` 读写速度快但不支持事务。
2. **字符集**：建议统一使用 `utf8mb4`（支持 emoji 和所有 Unicode 字符），避免乱码。
3. **权限**：创建/删除表需要 `CREATE` 和 `DROP` 权限，需确保当前用户有权限操作。

操作前请确认表名和数据，避免误删重要信息！

## 示例展示
```sql
CREATE TABLE user(id INT, name VARCHAR(10), age TINYINT, sex ENUM('0','1','2'), score FLOAT(5, 2)); -- 创建表

SHOW TABLES; -- 展示表

DROP TABLE user; -- 删除表
```