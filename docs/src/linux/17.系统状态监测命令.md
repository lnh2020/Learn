在 Linux 系统中，系统状态监测命令用于实时查看或定期查看系统的运行状态、资源占用、进程负载情况等，是系统运维和问题排查的重要工具。以下是常用的系统状态监测命令：

## 一、进程与资源监控
### 1. `top` - 实时进程监控（动态更新）
最常用的系统监控工具，可查看进程的 CPU、内存占用等信息。

```bash
top  # 进入交互界面，按 q 退出
```

**常用快捷键**：

+ `P`：按 CPU 使用率排序（默认）
+ `M`：按内存使用率排序
+ `T`：按进程运行时间排序
+ `k`：输入进程 ID 终止指定进程
+ `u`：查看指定用户的进程
+ `1`：显示所有 CPU 核心的负载情况

**输出解读**：

+ 顶部显示系统整体信息（当前时间、运行时间、登录用户数、1/5/15 分钟负载）
+ 进程列表字段：PID（进程 ID）、USER（所属用户）、% CPU、% MEM、VSZ（虚拟内存）、RSS（物理内存）、STAT（状态）、COMMAND（命令）

### 2. `htop` - 增强版进程监控（需安装）
`top` 的替代工具，界面更友好，支持鼠标操作和颜色区分。

```bash
htop  # 进入交互界面，功能与 top 类似但更直观
```

### 3. `ps` - 静态进程查看（快照）
用于查看特定时间点的进程状态，常与管道结合过滤结果。

```bash
ps aux       # 显示所有进程的详细信息（包括用户、CPU、内存等）
ps -ef       # 以全格式显示进程（含父进程ID）
ps aux | grep "nginx"  # 筛选包含 nginx 的进程
```

## 二、CPU 状态监测
### 1. `vmstat` - 系统整体资源监控
显示 CPU、内存、IO 等系统整体状态，适合观察系统瓶颈。

```bash
vmstat 2 5  # 每2秒输出一次，共输出5次
```

**关键字段**：

+ `us`：用户空间程序占用 CPU 百分比
+ `sy`：内核空间占用 CPU 百分比
+ `id`：CPU 空闲百分比
+ `wa`：等待 IO 的 CPU 百分比（数值过高可能表示磁盘 IO 瓶颈）

### 2. `mpstat` - CPU 核心详细监控（需安装 `sysstat`）
查看每个 CPU 核心的使用率，定位是否存在单核心负载过高问题。

```bash
mpstat -P ALL 1  # 每1秒显示所有CPU核心的状态
```

## 三、内存状态监测
### 1. `free` - 内存使用概况
显示物理内存、交换分区（swap）的使用情况。

```bash
free -h  # 以人类可读单位（G、M）显示
```

**输出解读**：

+ `total`：总内存
+ `used`：已使用内存（包含缓存和缓冲区）
+ `free`：完全空闲内存
+ `available`：可用内存（实际可分配给新进程的内存）
+ `Swap`：交换分区使用情况（频繁使用可能表示物理内存不足）

### 2. `vmstat` - 内存交换监控
通过 `vmstat` 可观察内存页交换情况：

```bash
vmstat 1
# 关注 si（从swap读入内存的速率）和 so（从内存写入swap的速率），数值过高表示内存紧张
```

## 四、磁盘 IO 监测
### 1. `iostat` - 磁盘 IO 性能监控（需安装 `sysstat`）
查看磁盘读写速率、IO 等待时间等，定位磁盘瓶颈。

```bash
iostat -x 1  # 每1秒显示一次扩展信息（包含IO细节）
```

**关键字段**：

+ `%util`：磁盘利用率（接近 100% 表示磁盘繁忙）
+ `r/s`/`w/s`：每秒读写次数
+ `rkB/s`/`wkB/s`：每秒读写数据量（KB）
+ `await`：IO 请求平均等待时间（毫秒，数值过高表示 IO 压力大）

### 2. `iotop` - 进程级磁盘 IO 监控（需安装）
查看每个进程的磁盘读写情况，定位消耗 IO 的进程。

```bash
iotop  # 类似 top 的交互界面，显示进程的 IO 占用
```

## 五、网络状态监测
### 1. `ifstat` - 网络流量监控（需安装）
显示各网络接口的实时流量（收发速率）。

```bash
ifstat 1  # 每1秒显示一次网络流量
```

### 2. `netstat`/`ss` - 网络连接与端口监控
查看网络连接、监听端口、进程占用的端口等。

```bash
# 显示所有监听的 TCP/UDP 端口及对应进程（需 root）
netstat -tulnp
ss -tulnp  # ss 是 netstat 的替代工具，效率更高

# 查看所有已建立的 TCP 连接
netstat -ant
```

### 3. `tcpdump` - 网络数据包捕获（需 root）
抓取网络数据包，用于网络问题排查（如丢包、延迟）。

```bash
tcpdump -i eth0 port 80  # 抓取 eth0 接口上 80 端口的数据包
tcpdump -w capture.pcap  # 将数据包保存到文件（可用 Wireshark 分析）
```

## 六、系统负载与整体状态
### 1. `uptime` - 系统负载概览
简洁显示系统运行时间和平均负载。

```bash
uptime
# 输出示例：15:30:00 up 2 days,  3:45,  2 users,  load average: 0.85, 0.76, 0.68
# 最后三个数值：1/5/15分钟内的系统平均负载（CPU核心数为N时，负载>N表示过载）
```

### 2. `dmesg` - 系统内核日志
查看系统启动过程中的内核日志，包含硬件检测、驱动加载、错误信息等。

```bash
dmesg | less  # 分页查看，常用来排查硬件或驱动问题
dmesg | grep -i error  # 筛选错误信息
```

### 3. `sar` - 系统历史状态查询（需安装 `sysstat`）
收集并存储系统历史性能数据，支持查询过去的 CPU、内存、IO 等状态。

```bash
sar -u 1 5  # 实时查看CPU使用率（每1秒，共5次）
sar -r -f /var/log/sa/sa20  # 查看20号的内存使用历史数据
```

## 总结
+ 实时监控整体状态：`top`/`htop`、`uptime`
+ 排查 CPU 问题：`vmstat`、`mpstat`
+ 分析内存问题：`free`、`vmstat`
+ 定位磁盘 IO 瓶颈：`iostat`、`iotop`
+ 网络问题排查：`ifstat`、`ss`、`tcpdump`

根据具体需求选择合适的工具，结合多个命令的输出可更全面地判断系统状态和定位问题。