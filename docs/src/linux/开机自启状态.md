`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">chkconfig</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> 是 </font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">SysVinit</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> 服务管理架构中用于配置服务开机自启状态的命令工具，主要用于旧版 Linux 系统（如 CentOS 6、Ubuntu 14.04 及更早版本）。它通过管理服务在不同 “运行级别” 的自启状态，控制服务是否随系统启动而自动运行。</font>

## <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">一、chkconfig 核心功能</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">配置服务在特定运行级别的自启状态（开启 / 关闭）</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">查看服务在各运行级别的自启状态</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">管理系统服务的启动脚本</font>

## <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">二、常用命令格式</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig [选项] [服务名]
```

## <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">三、关键选项与示例</font>
### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">1. 查看所有服务的自启状态</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --list
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">输出示例：</font>

**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">plaintext</font>**

```plain
httpd        0:off   1:off   2:on    3:on    4:off   5:on    6:off
mysqld       0:off   1:off   2:on    3:on    4:off   5:on    6:off
sshd         0:off   1:off   2:on    3:on    4:on    5:on    6:off
```

+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">每行代表一个服务，数字</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">0-6</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">对应运行级别</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">on</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">表示该级别下服务开机自启，</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">off</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">表示不自启</font>

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">2. 查看单个服务的自启状态</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --list [服务名]
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">示例（查看 httpd 服务）：</font>

**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --list httpd
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">3. 设置服务开机自启（所有级别）</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig [服务名] on
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">示例（开启 sshd 服务自启）：</font>

**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig sshd on
```

+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">会在所有常用运行级别（2-5）开启自启</font>

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">4. 关闭服务开机自启（所有级别）</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig [服务名] off
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">示例（关闭 mysqld 服务自启）：</font>

**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig mysqld off
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">5. 为特定运行级别配置自启状态</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --level [级别] [服务名] [on|off]
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">示例：</font>

+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">仅在运行级别 3 和 5 开启 httpd 自启：</font>**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --level 35 httpd on
```

+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">在运行级别 2 关闭 sshd 自启：</font>**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --level 2 sshd off
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">6. 添加自定义服务到 chkconfig 管理</font>
<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">如果手动编写了服务启动脚本（放在</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">/etc/init.d/</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">目录），需先添加到 chkconfig 管理：</font>

**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --add [服务名]
```

+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">脚本需符合特定格式（包含</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">chkconfig: [默认级别] [启动顺序] [关闭顺序]</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">注释）</font>

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">7. 从 chkconfig 管理中移除服务</font>
**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
chkconfig --del [服务名]
```

## <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">四、注意事项</font>
1. **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">适用系统</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：仅用于 SysVinit 架构的系统（如 CentOS 6），现代系统（CentOS 7+、Ubuntu 15.04+）使用 Systemd 的</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">systemctl enable/disable</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">替代。</font>
2. **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">运行级别对应</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：</font>
    - <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">常用级别：2（多用户无图形）、3（多用户带网络）、5（图形界面）</font>
    - <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">特殊级别：0（关机）、6（重启）通常需设为</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">off</font>`
3. **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">权限要求</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：修改服务状态需</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">root</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">权限（加</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">sudo</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">）。</font>
4. **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">即时生效</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">chkconfig</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">仅配置开机自启状态，不会立即启动 / 停止服务，需配合</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">service</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">命令：</font>**<font style="color:rgba(0, 0, 0, 0.85);background-color:rgb(252, 252, 252);">bash</font>**

```bash
sudo service httpd start  # 立即启动服务
```

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">通过</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">chkconfig</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">，可以灵活控制服务在不同系统运行状态下的自动启动行为，是旧版 Linux 系统服务管理的核心工具之一。</font>

