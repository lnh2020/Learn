<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">在 Linux 系统中，环境变量是一组动态的键值对，用于存储系统或用户的配置信息，供进程在运行时访问。它们对系统运行和程序执行至关重要，以下是关于环境变量的核心知识：</font>

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">一、环境变量的基本概念</font>
+ **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">作用</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：控制程序的行为（如路径查找、语言设置、临时文件位置等）</font>
+ **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">特点</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：全局可见（对所有子进程有效），可动态修改</font>
+ **<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">常见环境变量</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">PATH</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：系统查找可执行程序的路径列表</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">HOME</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：当前用户的家目录路径</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">USER</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：当前登录用户名</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">LANG</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：系统语言和编码设置</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">PWD</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：当前工作目录的绝对路径</font>
    - `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">SHELL</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：当前使用的 Shell 程序路径</font>

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">二、环境变量的操作命令</font>
#### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">1. 查看环境变量</font>
**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 查看所有环境变量
env          # 显示所有环境变量
printenv     # 与 env 类似，格式略有不同

# 查看指定环境变量的值
echo $变量名  # 例如：echo $PATH
printenv PATH # 专门用于查看环境变量
```

#### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">2. 设置 / 修改环境变量</font>
**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 临时设置（仅当前 Shell 有效，关闭终端后失效）
变量名=值
export 变量名=值  # 声明为环境变量（子进程可见）

# 示例
export NAME="Linux"
export PATH="$PATH:/new/directory"  # 向 PATH 中添加新路径
```

#### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">3. 删除环境变量</font>
**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
unset 变量名
# 示例：删除临时设置的 NAME 变量
unset NAME
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">三、环境变量的持久化</font>
<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">临时设置的环境变量在 Shell 关闭后会丢失，若需永久生效，需写入配置文件：</font>

#### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">1. 用户级配置（仅对当前用户有效）</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">~/.bashrc</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：bash Shell 启动时加载（推荐用于别名、函数等）</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">~/.bash_profile</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">或</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">~/.profile</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：用户登录时加载（推荐用于环境变量）</font>

**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 编辑配置文件（以 .bashrc 为例）
vim ~/.bashrc

# 在文件末尾添加环境变量设置
export JAVA_HOME=/usr/local/java
export PATH="$JAVA_HOME/bin:$PATH"

# 使配置立即生效（无需重启）
source ~/.bashrc  # 或 . ~/.bashrc
```

#### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">2. 系统级配置（对所有用户有效，需管理员权限）</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">/etc/profile</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：系统全局环境变量配置</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">/etc/environment</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：系统级环境变量（较少用）</font>
+ `<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">/etc/bashrc</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：所有用户的 bash 配置</font>

**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 编辑系统级配置（需 sudo）
sudo vim /etc/profile

# 添加全局环境变量
export PATH="/usr/local/sbin:$PATH"

# 使系统配置生效
source /etc/profile
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">四、常用环境变量详解</font>
1. `**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">PATH</font>**`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：决定系统从哪些目录查找可执行命令，多个路径用冒号</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">:</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">分隔</font>**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 查看当前 PATH
echo $PATH  # 输出示例：/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin

# 临时添加新路径（如 ~/bin）
export PATH="$PATH:$HOME/bin"
```

2. `**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">HOME</font>**`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：当前用户的家目录，</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">~</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">符号是其简写</font>**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
echo $HOME  # 输出：/home/username（普通用户）或 /root（root用户）
```

3. `**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">LANG</font>**`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：控制系统语言和字符编码</font>**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
echo $LANG  # 输出示例：zh_CN.UTF-8（中文环境）
export LANG=en_US.UTF-8  # 临时切换为英文环境
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">五、环境变量的继承与作用域</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">环境变量具有</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">继承性</font>**<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">：子进程会继承父进程的环境变量（通过</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">export</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">声明的变量）</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">普通变量（未用</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">export</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">声明）仅在当前 Shell 有效，不被子进程继承</font>

**<font style="color:rgb(249, 250, 251);background-color:rgb(252, 252, 252);">bash</font>**

```bash
# 普通变量（子进程不可见）
TEST1="hello"
bash  # 进入子 Shell
echo $TEST1  # 输出空（未继承）
exit  # 退出子 Shell

# 环境变量（子进程可见）
export TEST2="world"
bash
echo $TEST2  # 输出：world（已继承）
exit
```

### <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">注意事项</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">修改</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">PATH</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">时建议使用</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">$PATH</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">保留原有路径，避免覆盖（如</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">export PATH="$PATH:/new/path"</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">）</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">用户级配置优先于系统级配置，若两者冲突，以用户级为准</font>
+ <font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">不同 Shell（如 zsh、fish）的配置文件可能不同（如 zsh 使用</font><font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);"> </font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">~/.zshrc</font>`<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">）</font>

<font style="color:rgb(0, 0, 0);background-color:rgb(252, 252, 252);">环境变量是 Linux 系统的核心机制之一，合理配置环境变量可以简化命令执行、控制程序行为，是系统管理和开发工作的基础。</font>

